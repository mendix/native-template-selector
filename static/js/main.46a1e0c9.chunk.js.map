{"version":3,"sources":["hooks.js","Routes.js","TemplateDataProvider.js","components.js","MainPage.js","DiffView.js","ComparePage.js","App.js","reportWebVitals.js","index.js"],"names":["MENDIX_RAW_BASE_URL","MENDIX_VERSIONS_URL","MENDIX_RELEASES_URL","RequestState","Object","freeze","loading","complete","Routes","TemplateDataContext","createContext","versions","releases","TemplateDataProvider","Provider","useTemplateData","useContext","sort","a","b","compare","tag_name","Space","styled","div","props","width","height","HeaderText","h2","StatusText","color","LoadingView","ErrorStatusText","MainPage","mendixVersions","mendixReleases","style","display","alignItems","justifyContent","flexDirection","to","QueryView","inputRef","useRef","useState","templateRelease","setTemplateRelease","queryError","setQueryError","validationMessage","setValidationMessage","onQueryTemplateRelease","useCallback","mendixVersion","semver","parse","loose","splitVersion","split","exampleVersion","map","value","i","join","error","mendixVersionRange","keys","find","templateVersion","satisfies","coerce","min","max","release","maxSatisfying","result","indexOf","onQuery","undefined","current","textAlign","maxWidth","StyledInput","ref","onChange","placeholder","SuccessText","input","DiffView","diffText","files","parseDiff","filter","item","newPath","oldPath","some","path","RegExp","test","Boolean","data","oldRevision","newRevision","StyledDiff","Diff","DiffContainer","isVisible","setVisibility","CollapsibleTitle","onClick","type","DiffCodeWrapper","viewType","diffType","hunks","hunk","content","button","FileNameTitle","span","FileName","Tag","FileStatus","add","modify","delete","rename","ComparePage","fromOption","setFromOption","toOption","setToOption","options","label","flexGrow","StyleSelect","from","requestState","setRequestState","requestError","setRequestError","templateDiff","setTemplateDiff","useEffect","fetch","then","res","ok","status","Error","statusText","text","diff","catch","message","toString","finally","state","useQueryTemplateDiff","Select","App","setMendixVersions","setMendixReleases","Promise","all","p","json","versionsError","releasesError","useQueryMendixTemplate","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.46a1e0c9.chunk.js","sourcesContent":["import semver from \"semver\";\nimport { useCallback, useEffect, useState } from \"react\";\n\nconst MENDIX_TEMPLATE_REPO = \"mendix/native-template\";\nconst MENDIX_RAW_BASE_URL = `https://raw.githubusercontent.com/${MENDIX_TEMPLATE_REPO}/master`;\nconst MENDIX_VERSIONS_URL = `${MENDIX_RAW_BASE_URL}/mendix_version.json`;\nconst MENDIX_RELEASES_URL = `${MENDIX_RAW_BASE_URL}/.mx/releases_list.json`;\nconst MENDIX_TEMPLATE_DIFF_URL = `https://raw.githubusercontent.com/mendix/native-template-diffs/diffs/diffs`;\n\nexport const RequestState = Object.freeze({\n  loading: 1,\n  complete: 2,\n});\n\nexport function useQueryMendixTemplate() {\n  const [requestState, setRequestState] = useState(RequestState.loading);\n  const [requestError, setRequestError] = useState();\n  const [mendixVersions, setMendixVersions] = useState();\n  const [mendixReleases, setMendixReleases] = useState();\n\n  useEffect(() => {\n    setRequestError(undefined);\n    setRequestState(RequestState.loading);\n    Promise.all(\n      [fetch(MENDIX_VERSIONS_URL), fetch(MENDIX_RELEASES_URL)].map((p) =>\n        p.then((res) => res.json())\n      )\n    )\n      .then(([versions, releases]) => {\n        setMendixVersions(versions);\n        setMendixReleases(releases);\n      })\n      .catch(([versionsError, releasesError]) =>\n        setRequestError(versionsError ?? releasesError)\n      )\n      .finally(() => setRequestState(RequestState.complete));\n  }, []);\n\n  return {\n    state: requestState,\n    error: requestError,\n    mendixVersions,\n    mendixReleases,\n  };\n}\n\nexport function useQueryTemplateDiff({ from, to }) {\n  const [requestState, setRequestState] = useState(RequestState.loading);\n  const [requestError, setRequestError] = useState();\n  const [templateDiff, setTemplateDiff] = useState();\n\n  useEffect(() => {\n    setRequestError(undefined);\n    setRequestState(RequestState.loading);\n    fetch(`${MENDIX_TEMPLATE_DIFF_URL}/${from}..${to}.diff`)\n      .then((res) => {\n        if (!res.ok) {\n          if (res.status === 404) {\n            throw new Error(`Missing diff files for ${from} and ${to}`);\n          }\n          throw new Error(res.statusText);\n        }\n        return res.text();\n      })\n      .then((diff) => setTemplateDiff(diff))\n      .catch((error) => setRequestError(error.message || error.toString()))\n      .finally(() => setRequestState(RequestState.complete));\n  }, [from, to]);\n\n  return {\n    state: requestState,\n    error: requestError,\n    templateDiff,\n  };\n}\n\nexport function useQueryTemplateRelease(mendixVersions, mendixReleases) {\n  return useCallback(\n    (mendixVersion) => {\n      const parsedVersion = semver.parse(mendixVersion, { loose: true });\n      if (!parsedVersion) {\n        const splitVersion = mendixVersion.split(\".\");\n        const exampleVersion = [\"x\", \"x\", \"x\"]\n          .map((value, i) => splitVersion[i] ?? value)\n          .join(\".\");\n        return {\n          error: `The supplied mendix version is not valid. It needs to be a valid Semantic Version. eg ${exampleVersion}`,\n        };\n      }\n\n      const mendixVersionRange = Object.keys(\n        mendixVersions\n      ).find((templateVersion) =>\n        semver.satisfies(semver.coerce(mendixVersion), templateVersion)\n      );\n      if (!mendixVersionRange) {\n        return {\n          error: `Could not determine a proper mendix version range for ${mendixVersion}`,\n        };\n      }\n\n      const { min, max } = mendixVersions[mendixVersionRange];\n      const versions = mendixReleases.map((release) => release.tag_name);\n      const templateVersion = semver.maxSatisfying(versions, `${min} - ${max}`);\n      if (!templateVersion) {\n        return {\n          error: `Could not determine a proper template version when ${mendixVersionRange} using ${mendixVersion}`,\n        };\n      }\n\n      return { result: mendixReleases[versions.indexOf(templateVersion)] };\n    },\n    [mendixVersions, mendixReleases]\n  );\n}\n","export const Routes = {\n    home: '/',\n    compare: '/compare'\n}","import { createContext, useContext } from \"react\";\nimport { compare } from \"semver\";\n\nconst TemplateDataContext = createContext({ versions: [], releases: {} });\n\nexport const TemplateDataProvider = TemplateDataContext.Provider;\n\nexport function useTemplateData() {\n  const { versions, releases } = useContext(TemplateDataContext);\n  releases.sort((a, b) => compare(b.tag_name, a.tag_name));\n\n  return {\n    versions,\n    releases,\n  };\n}\n","import styled from \"styled-components\";\nimport React from \"react\";\n\nexport const Space = styled.div`\n  min-width: ${(props) => (props.width || 0) + \"px\"};\n  min-height: ${(props) => (props.height || 0) + \"px\"};\n`;\n\nexport const HeaderText = styled.h2`\n  font-size: xxx-large;\n  font-weight: lighter;\n`;\n\nexport const StatusText = styled.div`\n  font-size: 1em;\n  display: block;\n  color: ${(props) => props.color};\n`;\n\nexport const LoadingView = () => <p>Loading...</p>;\n\nexport const ErrorStatusText = (props) => <StatusText {...props} color=\"darkred\" />;\n","import React from \"react\";\nimport { useQueryTemplateRelease } from \"./hooks\";\nimport { useCallback, useRef, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { Link } from \"react-router-dom\";\nimport { Routes } from \"./Routes\";\nimport { useTemplateData } from \"./TemplateDataProvider\";\nimport {HeaderText, StatusText, Space, ErrorStatusText} from \"./components\";\n\nexport function MainPage() {\n  const {\n    versions: mendixVersions,\n    releases: mendixReleases,\n  } = useTemplateData();\n\n  return (\n    <div\n      style={{\n        height: \"100vh\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        flexDirection: \"column\",\n      }}\n    >\n      <QueryView versions={mendixVersions} releases={mendixReleases} />\n      <Space height=\"24\" />\n      <Link to={Routes.compare}>Compare Template Versions</Link>\n    </div>\n  );\n}\n\nconst QueryView = ({ versions, releases }) => {\n  const inputRef = useRef();\n  const [templateRelease, setTemplateRelease] = useState();\n  const [queryError, setQueryError] = useState();\n  const [validationMessage, setValidationMessage] = useState();\n  const onQueryTemplateRelease = useQueryTemplateRelease(versions, releases);\n\n  const onQuery = useCallback(() => {\n    setValidationMessage(undefined);\n    setQueryError(undefined);\n    setTemplateRelease(undefined);\n\n    const mendixVersion = inputRef.current.value;\n    if (!mendixVersion) {\n      setValidationMessage(\"Needs a value\");\n      return;\n    }\n\n    const { error, result } = onQueryTemplateRelease(mendixVersion);\n    if (error) {\n      setQueryError(error);\n      return;\n    }\n\n    setTemplateRelease(result);\n  }, [onQueryTemplateRelease]);\n\n  return (\n    <div style={{ textAlign: \"center\", maxWidth: \"600px\" }}>\n      <HeaderText>Input Mendix Version</HeaderText>\n      <StyledInput ref={inputRef} onChange={onQuery} placeholder=\"eg 9.1.0\" />\n      <Space height=\"16\" />\n      {templateRelease && (\n        <>\n          <SuccessText>{templateRelease.tag_name}</SuccessText>\n          <Space height=\"4\" />\n          <span style={{ color: \"gray\" }}>recommended template version</span>\n        </>\n      )}\n      {validationMessage && (\n        <StatusText color=\"darkorange\">{validationMessage}</StatusText>\n      )}\n      {queryError && <ErrorStatusText>{queryError}</ErrorStatusText>}\n    </div>\n  );\n};\n\nconst SuccessText = styled.div`\n  font-size: 3em;\n  display: block;\n  color: forestgreen;\n`;\n\nconst StyledInput = styled.input`\n  font-size: 1.25em;\n  padding: 0.5em;\n  width: -webkit-fill-available;\n  text-align: center;\n  border: 1px solid lightgray;\n  border-radius: 4px;\n  flex-grow: 1;\n\n  ::placeholder {\n    color: lightgray;\n  }\n`;\n","import { Decoration, Diff, Hunk, parseDiff } from \"react-diff-view\";\nimport styled from \"styled-components\";\nimport { useState } from \"react\";\nimport { Space } from \"./components\";\n\nexport function DiffView({ diffText }) {\n  const files = parseDiff(diffText).filter(\n    (item) =>\n      ![item.newPath, item.oldPath].some((path) =>\n        new RegExp(\"(-|.)lock|.github\").test(path ?? \"\")\n      ) && Boolean(item.newPath || item.oldPath)\n  );\n\n  return (\n    <>\n      {files.map((data) => (\n        <DiffContainer\n          key={[\n            data.newPath || data.oldPath,\n            data.oldRevision,\n            data.newRevision,\n          ].join(\"-\")}\n          data={data}\n        />\n      ))}\n    </>\n  );\n}\n\nconst StyledDiff = styled(Diff)`\n  .diff-gutter-col {\n    width: 2em;\n  }\n\n  td.diff-gutter {\n    color: rgba(27, 31, 35, 0.3);\n    padding: 0;\n    text-align: center;\n    font-size: 0.85em;\n    vertical-align: middle;\n    cursor: auto;\n  }\n\n  td.diff-gutter:hover {\n    cursor: pointer;\n    color: rgba(27, 31, 35, 0.6);\n  }\n\n  td.diff-code {\n    font-size: 0.95em;\n    color: #24292e;\n  }\n\n  td.diff-gutter-omit:before {\n    width: 0;\n  }\n`;\n\nconst DiffContainer = ({ data }) => {\n  const [isVisible, setVisibility] = useState(false);\n\n  return (\n    <>\n      <CollapsibleTitle onClick={() => setVisibility(!isVisible)} isVisible>\n        <span>{isVisible ? \"=\" : \"#\"}</span>\n        <Space width=\"16\" />\n        <FileName\n          oldPath={data.oldPath}\n          newPath={data.newPath}\n          type={data.type}\n        />\n        <Space width=\"16\" />\n        <FileStatus type={data.type} />\n      </CollapsibleTitle>\n      {isVisible && (\n        <DiffCodeWrapper>\n          <StyledDiff\n            key={data.oldRevision + \"-\" + data.newRevision}\n            viewType=\"split\"\n            diffType={data.type}\n            hunks={data.hunks}\n          >\n            {(hunks) =>\n              hunks.map((hunk) => {\n                return (\n                  <>\n                    <Decoration key={\"decoration-\" + hunk.content}>\n                      {hunk.content}\n                    </Decoration>\n                    <Hunk key={hunk.content} hunk={hunk} />\n                  </>\n                );\n              })\n            }\n          </StyledDiff>\n        </DiffCodeWrapper>\n      )}\n    </>\n  );\n};\n\nconst DiffCodeWrapper = styled.div`\n  background: white;\n  margin-bottom: 1em;\n  padding: 1em 0.25em;\n  border: 1px solid whitesmoke;\n  border-radius: 0 0 4px 4px;\n`;\n\nconst CollapsibleTitle = styled.button`\n  background: whitesmoke;\n  color: black;\n  display: flex;\n  cursor: pointer;\n  align-items: center;\n  font-size: 1em;\n  min-height: 48px;\n  width: 100%;\n  margin-top: 1em;\n  padding: 0.25em 1em;\n  text-align: left;\n  border: 2px solid transparent;\n  border-radius: ${(props) => (props.isVisible ? \"4px 4px 0 0\" : \"4px\")};\n\n  :hover {\n    background-color: lightgray;\n  }\n`;\n\nconst FileNameTitle = styled.span`\n  font-weight: bold;\n  display: flex;\n`;\n\nconst FileName = ({ oldPath, newPath, type }) => {\n  if (type === \"delete\") {\n    return <FileNameTitle>{oldPath}</FileNameTitle>;\n  }\n\n  if (oldPath !== newPath && type !== \"add\") {\n    return (\n      <FileNameTitle>\n        {oldPath} <span>></span> {newPath}\n        <Space width=\"8\" />\n        <Tag color=\"lightgrey\">RENAMED</Tag>\n      </FileNameTitle>\n    );\n  }\n\n  return <FileNameTitle>{newPath}</FileNameTitle>;\n};\n\nconst Tag = styled.span`\n  display: inline-block;\n  background-color: ${(props) => props.color};\n  color: white;\n  font-size: 0.8em;\n  padding: 0.2em 0.5em;\n  border-radius: 4px;\n`;\n\nconst FileStatus = ({ type }) => {\n  const colors = {\n    add: \"blue\",\n    modify: \"green\",\n    delete: \"red\",\n    rename: \"orange\",\n  };\n\n  const labels = {\n    add: \"ADDED\",\n    modify: \"MODIFIED\",\n    delete: \"DELETED\",\n    rename: \"RENAMED\",\n  };\n\n  return <Tag color={colors[type]}>{labels[type]}</Tag>;\n};\n","import React, { useState } from \"react\";\nimport { RequestState, useQueryTemplateDiff } from \"./hooks\";\nimport { DiffView } from \"./DiffView\";\nimport { Link } from \"react-router-dom\";\nimport Select from \"react-select\";\nimport { Routes } from \"./Routes\";\nimport styled from \"styled-components\";\nimport { useTemplateData } from \"./TemplateDataProvider\";\nimport { ErrorStatusText, HeaderText, LoadingView, Space } from \"./components\";\n\nexport function ComparePage() {\n  const { releases: mendixReleases } = useTemplateData();\n  const [fromOption, setFromOption] = useState(null);\n  const [toOption, setToOption] = useState(null);\n\n  let options = mendixReleases.map((release) => ({\n    value: release.tag_name,\n    label: release.tag_name,\n  }));\n\n  return (\n    <div\n      style={{\n        display: \"flex\",\n        justifyContent: \"center\",\n      }}\n    >\n      <div\n        style={{\n          width: \"75%\",\n        }}\n      >\n        <div style={{ display: \"flex\", alignItems: \"center\" }}>\n          <HeaderText style={{ flexGrow: 1 }}>\n            Compare Template Versions\n          </HeaderText>\n          <Link to={Routes.home}>Home</Link>\n        </div>\n        <div style={{ display: \"flex\" }}>\n          <StyleSelect\n            value={fromOption}\n            onChange={setFromOption}\n            options={options.filter(({ value }) => value !== toOption)}\n          />\n          <Space width=\"8\" />\n          <StyleSelect\n            value={toOption}\n            onChange={setToOption}\n            options={options.filter(({ value }) => value !== fromOption)}\n          />\n        </div>\n        <Space height=\"24\" />\n        {fromOption && toOption && fromOption.value !== toOption.value && (\n          <QueryView from={fromOption.value} to={toOption.value} />\n        )}\n        <Space height=\"64\" />\n      </div>\n    </div>\n  );\n}\n\nfunction QueryView({ from, to }) {\n  const { state, error, templateDiff } = useQueryTemplateDiff({\n    from,\n    to,\n  });\n\n  return (\n    <>\n      {state === RequestState.loading && <LoadingView />}\n      {state === RequestState.complete && error && (\n        <ErrorStatusText>{error}</ErrorStatusText>\n      )}\n      {state === RequestState.complete && !error && (\n        <DiffView diffText={templateDiff} />\n      )}\n    </>\n  );\n}\n\nconst StyleSelect = styled(Select)`\n  flex-grow: 1;\n  font-size: 1.125em;\n\n  > div {\n    min-height: 48px;\n  }\n`;\n","import React from \"react\";\nimport { MainPage } from \"./MainPage\";\nimport { ComparePage } from \"./ComparePage\";\nimport { BrowserRouter, Switch, Route } from \"react-router-dom\";\nimport { Routes } from \"./Routes\";\nimport { RequestState, useQueryMendixTemplate } from \"./hooks\";\nimport { TemplateDataProvider } from \"./TemplateDataProvider\";\nimport { ErrorStatusText, LoadingView } from \"./components\";\n\nexport default function App() {\n  const {\n    state,\n    error,\n    mendixVersions,\n    mendixReleases,\n  } = useQueryMendixTemplate();\n\n  return (\n    <>\n      {state === RequestState.loading && <LoadingView />}\n      {state === RequestState.complete && error && (\n        <ErrorStatusText>{error}</ErrorStatusText>\n      )}\n      {state === RequestState.complete && !error && (\n        <TemplateDataProvider\n          value={{\n            versions: mendixVersions,\n            releases: mendixReleases,\n          }}\n        >\n          <BrowserRouter>\n            <Switch>\n              <Route path={Routes.compare}>\n                <ComparePage />\n              </Route>\n              <Route path={Routes.home}>\n                <MainPage />\n              </Route>\n            </Switch>\n          </BrowserRouter>\n        </TemplateDataProvider>\n      )}\n    </>\n  );\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport \"react-diff-view/style/index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}